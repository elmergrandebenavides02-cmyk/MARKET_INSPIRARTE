<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADN TIGO - Cultura en Acci√≥n</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --tigo-blue: #00377d;
            --tigo-light-blue: #00a1e1;
            --tigo-gold: #f3b01a;
            --fondo: #f4f7f9;
            --blanco: #ffffff;
            --whatsapp: #25D366;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #d1d9e0;
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 450px;
            background: var(--blanco);
            box-shadow: 0 0 50px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        header {
            background: linear-gradient(135deg, var(--tigo-blue), var(--tigo-light-blue));
            color: white; text-align: center; padding: 30px 20px;
            border-bottom: 6px solid var(--tigo-gold);
        }

        #menu-principal { padding: 20px; display: block; }

        .grid-pasillos { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

        .card-menu {
            background: white; border-radius: 15px; padding: 15px;
            border: 1px solid #eee; text-align: center; cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: 0.3s;
        }

        .btn-categoria {
            width: 100%; padding: 10px; border: none; border-radius: 10px;
            color: white; font-weight: bold; margin-bottom: 8px; font-size: 0.75rem;
        }

        /* COLORES CAPACIDADES */
        .color-agilidad { background-color: #00a1e1; }
        .color-colaboracion { background-color: #00377d; }
        .color-foco { background-color: #f3b01a; color: #00377d !important; }
        .color-integridad { background-color: #722f37; }
        .color-talento { background-color: #00c389; }

        .progress-container {
            width: 100%; background: #eee; height: 8px; border-radius: 10px;
            overflow: hidden; margin: 10px 0;
        }
        .progress-fill { width: 0%; height: 100%; transition: width 0.8s ease; }

        /* PANTALLA RETO */
        #pantalla-reto { display: none; padding: 20px; background: var(--fondo); flex-grow: 1; flex-direction: column; }
        .reto-main-card {
            background: white; border-radius: 25px; padding: 25px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1); text-align: center;
        }

        .frase-quote { font-size: 1.1rem; font-style: italic; margin-bottom: 20px; min-height: 70px; display: flex; align-items: center; justify-content: center; line-height: 1.4; color: #333; }
        
        .btn-whatsapp {
            background: var(--whatsapp); color: white; padding: 10px 20px;
            border-radius: 20px; text-decoration: none; font-weight: bold;
            display: inline-flex; align-items: center; gap: 8px; margin-bottom: 20px; font-size: 0.85rem;
        }

        .reto-instruccion { background: #e3f2fd; padding: 15px; border-left: 5px solid var(--tigo-light-blue); text-align: left; margin-bottom: 15px; border-radius: 0 10px 10px 0; }
        
        .btn-principal { width: 100%; padding: 18px; border-radius: 30px; border: none; color: white; font-size: 1.1rem; font-weight: bold; cursor: pointer; background: var(--tigo-blue); }
        .btn-secundario { width: 100%; padding: 12px; background: none; border: 2px solid #ddd; border-radius: 30px; color: #888; margin-top: 10px; cursor: pointer; }

        #instruccion-compromiso {
            margin-top: 15px; font-size: 0.78rem; color: var(--tigo-blue); line-height: 1.5; 
            background: #fff; padding: 15px; border-radius: 12px; border: 1px dashed var(--tigo-gold);
            text-align: left; margin-bottom: 15px;
        }

        /* MODALES */
        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:6000; justify-content: center; align-items: center; padding: 20px; }
        .modal-content { background:white; padding:30px; border-radius:20px; text-align:left; max-width:400px; width: 100%; position: relative; max-height: 90vh; overflow-y: auto; }
        
        .insignia-maestro { color: var(--tigo-gold); font-size: 3rem; margin-bottom: 10px; display: block; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1 style="margin:0; font-size: 1.5rem;">ADN TIGO CULTURA</h1>
        <p style="margin:5px 0 0; opacity: 0.9;">Diciendo y Haciendo</p>
    </header>

    <div id="menu-principal">
        <div style="text-align: right; padding: 0 0 15px 0;">
            <button onclick="abrirInfo()" style="background: none; border: 1px solid #ccc; border-radius: 50%; width: 32px; height: 32px; color: #888; font-weight: bold; cursor: pointer; font-size: 1.1rem;">i</button>
        </div>

        <div class="grid-pasillos">
            <div class="card-menu" onclick="irAPasillo('agilidad')">
                <div class="btn-categoria color-agilidad">AGILIDAD</div>
                <div class="progress-container"><div id="bar-menu-agilidad" class="progress-fill color-agilidad"></div></div>
                <p style="font-size: 0.65rem; margin:0;"><span id="mini-dias-agilidad">0</span>/30 retos</p>
            </div>
            <div class="card-menu" onclick="irAPasillo('colaboracion')">
                <div class="btn-categoria color-colaboracion">COLABORACI√ìN</div>
                <div class="progress-container"><div id="bar-menu-colaboracion" class="progress-fill color-colaboracion"></div></div>
                <p style="font-size: 0.65rem; margin:0;"><span id="mini-dias-colaboracion">0</span>/30 retos</p>
            </div>
            <div class="card-menu" onclick="irAPasillo('foco')">
                <div class="btn-categoria color-foco">FOCO</div>
                <div class="progress-container"><div id="bar-menu-foco" class="progress-fill color-foco"></div></div>
                <p style="font-size: 0.65rem; margin:0;"><span id="mini-dias-foco">0</span>/30 retos</p>
            </div>
            <div class="card-menu" onclick="irAPasillo('integridad')">
                <div class="btn-categoria color-integridad">INTEGRIDAD</div>
                <div class="progress-container"><div id="bar-menu-integridad" class="progress-fill color-integridad"></div></div>
                <p style="font-size: 0.65rem; margin:0;"><span id="mini-dias-integridad">0</span>/30 retos</p>
            </div>
            <div class="card-menu" onclick="irAPasillo('talento')" style="grid-column: span 2;">
                <div class="btn-categoria color-talento">TALENTO TIGO</div>
                <div class="progress-container"><div id="bar-menu-talento" class="progress-fill color-talento"></div></div>
                <p style="font-size: 0.65rem; margin:0;"><span id="mini-dias-talento">0</span>/30 retos</p>
            </div>
        </div>
    </div>

    <div id="pantalla-reto">
        <div style="text-align:center; margin-bottom:15px;">
            <h2 id="titulo-pasillo" style="margin:0; color: var(--tigo-blue); font-size: 1.2rem; text-transform: uppercase;"></h2>
            <div class="progress-container" style="height: 12px; max-width: 80%; margin: 10px auto;">
                <div id="bar-reto-detalle" class="progress-fill"></div>
            </div>
            <p style="font-size: 0.8rem; color: #888;"><span id="porcentaje-txt">0%</span> completado</p>
        </div>

        <div class="reto-main-card">
            <div id="frase-display" class="frase-quote">"..."</div>
            <a href="javascript:void(0)" onclick="compartirWhatsApp()" class="btn-whatsapp">üì± Compartir con mi equipo</a>
            <div class="reto-instruccion">
                <strong style="font-size: 0.8rem; color: var(--tigo-blue);">‚ö° RETO ADN TIGO:</strong>
                <p id="reto-display" style="margin: 5px 0 0; font-size: 0.95rem;"></p>
            </div>
            <button id="btn-logrado" onclick="completarReto()" class="btn-principal">ACEPTO EL RETO / ¬°LOGRADO!</button>
            <div id="instruccion-compromiso">
                üìå <strong>Compromiso Tigo:</strong> Al presionar el bot√≥n, activas tu mentalidad para vivir nuestra cultura hoy.
            </div>
            <button class="btn-secundario" onclick="irAMenu()">‚Üê Volver al inicio</button>
        </div>
    </div>
</div>

<div id="modal-info" class="modal">
    <div class="modal-content">
        <h2 style="text-align:center; color: var(--tigo-blue);">üöÄ Cultura ADN Tigo</h2>
        <p>Esta es tu herramienta para fortalecer las capacidades que nos hacen l√≠deres.</p>
        <h3>Tu evoluci√≥n:</h3>
        <div style="background: #f9f9f9; padding: 15px; border-radius: 15px; margin: 10px 0; border: 1px solid #eee; font-size: 0.8rem;">
            <p>üå± <strong>Iniciado:</strong> 0-6 retos</p>
            <p>üåø <strong>Aprendiz:</strong> 7-13 retos</p>
            <p>üå≥ <strong>Practicante:</strong> 14-20 retos</p>
            <p style="color: var(--tigo-gold); font-weight: bold;">üëë Maestro: 21+ retos</p>
        </div>
        <h3>üîí Privacidad</h3>
        <p style="font-size: 0.85rem;">Tus datos son an√≥nimos. El progreso se guarda solo en este celular.</p>
        <button onclick="cerrarInfo()" class="btn-principal">¬°VAMOS!</button>
    </div>
</div>

<div id="modal-maestro" class="modal">
    <div class="modal-content" style="text-align:center;">
        <span class="insignia-maestro">üëë</span>
        <h2 style="color: var(--tigo-gold);">¬°NUEVO NIVEL: MAESTRO!</h2>
        <p id="mensaje-maestro"></p>
        <button onclick="cerrarModalMaestro()" class="btn-principal" style="background: var(--tigo-gold); color: var(--tigo-blue);">CONTINUAR LIDERANDO</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script src="capacidad.js"></script>
<script>
    let capacidadActual = '';
    let progreso = JSON.parse(localStorage.getItem('progresoTigoCultura')) || { agilidad: 0, colaboracion: 0, foco: 0, integridad: 0, talento: 0 };

    function actualizarBarrasMenu() {
        for (let cap in progreso) {
            const p = (progreso[cap] / 30) * 100;
            if(document.getElementById(`bar-menu-${cap}`)) {
                document.getElementById(`bar-menu-${cap}`).style.width = p + '%';
                document.getElementById(`mini-dias-${cap}`).innerText = progreso[cap];
            }
        }
    }

    function irAPasillo(cap) {
        capacidadActual = cap;
        document.getElementById('menu-principal').style.display = 'none';
        document.getElementById('pantalla-reto').style.display = 'flex';
        document.getElementById('titulo-pasillo').innerText = cap.replace('colaboracion', 'colaboraci√≥n');
        
        const lista = capacidadDB[cap];
        const random = lista[Math.floor(Math.random() * lista.length)];
        document.getElementById('frase-display').innerText = `"${random.frase}"`;
        document.getElementById('reto-display').innerText = random.reto;
        actualizarDetalleReto();
    }

    function actualizarDetalleReto() {
        const p = (progreso[capacidadActual] / 30) * 100;
        document.getElementById('bar-reto-detalle').style.width = p + '%';
        document.getElementById('bar-reto-detalle').className = `progress-fill color-${capacidadActual}`;
        document.getElementById('porcentaje-txt').innerText = Math.round(p) + '%';
    }

    function completarReto() {
        if (progreso[capacidadActual] < 30) {
            progreso[capacidadActual]++;
            localStorage.setItem('progresoTigoCultura', JSON.stringify(progreso));
            
            // Lluvia de confeti
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#00377d', '#f3b01a', '#00a1e1'] });

            // Verificar si subi√≥ a Maestro
            if (progreso[capacidadActual] === 21) {
                mostrarInsigniaMaestro();
            } else {
                setTimeout(irAMenu, 2000);
            }
        } else {
            alert("¬°Has completado todos los retos de este pasillo! Sigue viviendo la cultura Tigo.");
            irAMenu();
        }
    }

    function mostrarInsigniaMaestro() {
        const msjs = {
            agilidad: "¬°Eres un referente de la agilidad! Decir y hacer es tu nuevo est√°ndar.",
            colaboracion: "¬°Llegaste a las que sea! Eres un pilar de apoyo para todo el equipo.",
            foco: "¬°Full Foco! Tu capacidad de concentraci√≥n est√° en nivel superior.",
            integridad: "¬°L√≠der √≠ntegro! Eres el ejemplo de que no todo se vale.",
            talento: "¬°Protagonista total! Has tomado las riendas de tu desarrollo en Tigo."
        };
        document.getElementById('mensaje-maestro').innerText = msjs[capacidadActual];
        document.getElementById('modal-maestro').style.display = 'flex';
        // Confeti dorado especial
        confetti({ particleCount: 200, spread: 100, origin: { y: 0.5 }, colors: ['#f3b01a', '#ffffff'] });
    }

    function cerrarModalMaestro() {
        document.getElementById('modal-maestro').style.display = 'none';
        irAMenu();
    }

    function irAMenu() {
        document.getElementById('menu-principal').style.display = 'block';
        document.getElementById('pantalla-reto').style.display = 'none';
        actualizarBarrasMenu();
    }

    function abrirInfo() { document.getElementById('modal-info').style.display = 'flex'; }
    function cerrarInfo() { document.getElementById('modal-info').style.display = 'none'; }
    
    function compartirWhatsApp() {
        const texto = encodeURIComponent(`üöÄ Hoy acept√© este reto de Cultura ADN TIGO: ${document.getElementById('reto-display').innerText}`);
        window.open(`https://wa.me/?text=${texto}`, '_blank');
    }

    window.onload = actualizarBarrasMenu;
</script>
</body>
</html>
