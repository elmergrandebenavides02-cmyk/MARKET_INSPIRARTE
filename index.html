<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARKET_INSPIRARTE</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f1ea; color: #4a3728; display: flex; flex-direction: column; align-items: center; padding: 20px; margin: 0; }
        .header { text-align: center; margin-bottom: 30px; background-color: #6d4c41; color: white; padding: 20px; width: 100%; border-radius: 0 0 20px 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; max-width: 400px; }
        .card { background: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); cursor: pointer; border: 2px solid transparent; transition: all 0.3s; }
        .card:active { transform: scale(0.95); background-color: #efebe9; }
        .resiliencia { border-color: #8bc34a; }
        .calma { border-color: #03a9f4; }
        .sabiduria { border-color: #9c27b0; }
        .empatia { border-color: #ffc107; }
        .icon { font-size: 30px; margin-bottom: 10px; display: block; }
        #pantalla-inspiracion { display: none; background: white; width: 100%; max-width: 400px; padding: 30px; border-radius: 20px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin-top: 20px; border-top: 10px solid #6d4c41; }
        .btn-ready { background: #3e2723; color: white; border: none; padding: 15px 30px; border-radius: 25px; font-weight: bold; margin-top: 20px; cursor: pointer; width: 100%; transition: 0.3s; }
        .btn-ready:disabled { background: #bdbdbd; cursor: not-allowed; transform: scale(1) !important; }
        .btn-back { background: none; border: 2px solid #6d4c41; color: #6d4c41; padding: 12px; border-radius: 25px; font-weight: bold; margin-top: 15px; cursor: pointer; width: 100%; }
        .racha { margin-top: 30px; font-size: 0.9em; color: #8d6e63; font-weight: bold; }
        .mensaje-completado { color: #2e7d32; font-weight: bold; margin-top: 10px; display: none; font-size: 0.9em; }
    </style>
</head>
<body>

    <div class="header" onclick="regresar()">
        <h1>MARKET_INSPIRARTE</h1>
        <p>Una chispa para iluminar tu dÃ­a</p>
    </div>

    <div id="seleccion" style="text-align:center;">
        <h2 style="margin-bottom:20px;">Â¿QuÃ© necesitas llevarte hoy?</h2>
        <div class="grid">
            <div class="card resiliencia" onclick="mostrarInspiracion('resiliencia')">
                <span class="icon">ðŸŒ±</span> <strong>Resiliencia</strong>
            </div>
            <div class="card calma" onclick="mostrarInspiracion('calma')">
                <span class="icon">ðŸŒŠ</span> <strong>Calma</strong>
            </div>
            <div class="card sabiduria" onclick="mostrarInspiracion('sabiduria')">
                <span class="icon">ðŸ“š</span> <strong>SabidurÃ­a</strong>
            </div>
            <div class="card empatia" onclick="mostrarInspiracion('empatia')">
                <span class="icon">ðŸ§¡</span> <strong>EmpatÃ­a</strong>
            </div>
        </div>
    </div>

    <div id="pantalla-inspiracion">
        <h2 id="titulo-pasillo" style="color:#6d4c41; text-transform: capitalize;"></h2>
        <p id="cita" style="font-style: italic; font-size: 1.2em; margin: 20px 0;"></p>
        <p id="reto" style="background: #fdf5e6; padding: 15px; border-radius: 10px; font-weight: bold; color: #5d4037;"></p>
        
        <p id="msg-hecho" class="mensaje-completado">âœ¨ Â¡Has completado este entrenamiento por hoy! âœ¨</p>
        
        <button id="btn-finalizar" class="btn-ready" onclick="finalizar()">ENTRENAMIENTO COMPLETADO</button>
        <button class="btn-back" onclick="regresar()">â¬… VOLVER A LOS PASILLOS</button>
    </div>

    <div class="racha">
        Tu racha de inspiraciÃ³n: <span id="contador">0</span> dÃ­as ðŸ”¥
    </div>

    <script>
        let bibliotecaFrases = {};
        let categoriaActual = "";

        // Cargar el JSON desde tu archivo datos.json
        fetch('datos.json')
            .then(res => res.json())
            .then(data => {
                bibliotecaFrases = data;
                actualizarRachaInterfaz();
            })
            .catch(err => console.error("Error cargando frases:", err));

        function mostrarInspiracion(tipo) {
            categoriaActual = tipo;
            const lista = bibliotecaFrases[tipo];
            
            // SelecciÃ³n aleatoria
            const azar = lista[Math.floor(Math.random() * lista.length)];

            document.getElementById('titulo-pasillo').innerText = "Pasillo de " + tipo;
            document.getElementById('cita').innerText = `"${azar.frase}"`;
            document.getElementById('reto').innerText = "Tu reto: " + azar.reto;
            
            document.getElementById('seleccion').style.display = 'none';
            document.getElementById('pantalla-inspiracion').style.display = 'block';

            verificarEstadoBoton();
        }

        function verificarEstadoBoton() {
            const hoy = new Date().toDateString();
            const completados = JSON.parse(localStorage.getItem('market_completados') || '{}');
            const boton = document.getElementById('btn-finalizar');
            const mensaje = document.getElementById('msg-hecho');

            if (completados[categoriaActual] === hoy) {
                boton.disabled = true;
                boton.innerText = "Â¡LOGRADO!";
                mensaje.style.display = "block";
            } else {
                boton.disabled = false;
                boton.innerText = "ENTRENAMIENTO COMPLETADO";
                mensaje.style.display = "none";
            }
        }

        function finalizar() {
            // LANZAR CONFETI ðŸŽ‰
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#6d4c41', '#8bc34a', '#03a9f4', '#ffc107']
            });

            const hoy = new Date().toDateString();
            let registro = JSON.parse(localStorage.getItem('market_completados') || '{}');
            
            // Guardar progreso diario por categorÃ­a
            registro[categoriaActual] = hoy;
            localStorage.setItem('market_completados', JSON.stringify(registro));

            // Aumentar racha
            let racha = parseInt(localStorage.getItem('market_racha') || 0);
            racha++;
            localStorage.setItem('market_racha', racha);

            actualizarRachaInterfaz();
            verificarEstadoBoton();
        }

        function actualizarRachaInterfaz() {
            document.getElementById('contador').innerText = localStorage.getItem('market_racha') || 0;
        }

        function regresar() {
            document.getElementById('pantalla-inspiracion').style.display = 'none';
            document.getElementById('seleccion').style.display = 'block';
        }
    </script>
</body>
</html>
